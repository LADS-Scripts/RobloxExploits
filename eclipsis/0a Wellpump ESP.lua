--[[
  [CTRL + B] to toggle Wellpump ESP
]]

if workspace:FindFirstChild("WellContainer") then return end;

local uis = game:GetService("UserInputService");

local enabled = true
local hl = Instance.new("Highlight");
local container = Instance.new("Model");
container.Parent = workspace;
container.Name = "WellContainer";
hl.Adornee = container
hl.Parent = container

uis.InputBegan:Connect(function(input, gameProcessedEvent)
  if gameProcessedEvent then return end

  if input.KeyCode == Enum.KeyCode.B and uis:IsKeyDown(Enum.KeyCode.LeftControl) then
    enabled = not enabled;
    hl.Enabled = enabled;
  end
end)

for i, v in next, workspace:WaitForChild("Map"):GetChildren() do
  if i%80 == 0 then task.wait() end
  if v.Name == "Pipe1" and v:FindFirstChild("Pipe") and v.Pipe:FindFirstChild("WellTopFlange") then
    local clone = v:Clone();
    for _, bp:BasePart in clone:GetDescendants() do
        if bp:IsA('BasePart') then
            bp.Anchored = true;
            bp.CanCollide = false;
            bp.CanQuery = false;
            bp.CanTouch = false;
            bp:BreakJoints()
        end
    end
    clone.Parent = container;
  end
end